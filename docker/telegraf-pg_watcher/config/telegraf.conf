# Telegraf Configuration
# This is a placeholder config file
# Replace with your actual configuration

[agent]
  interval = "30s"
  round_interval = true
  metric_batch_size = 1000
  metric_buffer_limit = 10000
  collection_jitter = "0s"
  flush_interval = "10s"
  flush_jitter = "0s"
  precision = ""
  hostname = ""
  omit_hostname = false

# Output Plugin: InfluxDB (example - configure as needed)
# [[outputs.influxdb]]
#   urls = ["http://influxdb:8086"]
#   database = "telegraf"
#   retention_policy = ""
#   write_consistency = "any"
#   timeout = "5s"

# Output Plugin: Print to stdout (for testing)
[[outputs.file]]
  files = ["stdout"]
  data_format = "influx"

# Input Plugin: pg_watcher
[[inputs.exec]]
  commands = [
    "/usr/local/bin/pg_watcher -sql-cmd='SELECT datname, numbackends FROM pg_stat_database' -conn='user=postgres password=postgres host=postgres port=5432 sslmode=disable' -db-name=postgres"
  ]
  timeout = "30s"
  interval = "30s"
  data_format = "prometheus"
